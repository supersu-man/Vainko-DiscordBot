"use strict";var p=Object.create;var m=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var y=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of C(t))!g.call(e,s)&&s!==n&&m(e,s,{get:()=>t[s],enumerable:!(o=h(t,s))||o.enumerable});return e};var T=(e,t,n)=>(n=e!=null?p(f(e)):{},y(t||!e||!e.__esModule?m(n,"default",{value:e,enumerable:!0}):n,e));var i=require("discord.js");var l=require("discord.js"),I=new l.SlashCommandBuilder().setName("setup").setDescription("Setup vainko bot"),u=[I];var d=T(require("dotenv"));var c="Create Voice Channel",a=[{title:"Create Duo",newTitle:"New Duo",userLimit:2},{title:"Create Trio",newTitle:"New Trio",userLimit:3},{title:"Create Squad",newTitle:"New Squad",userLimit:4}];d.default.config();var v=new i.REST({version:"10"}).setToken(process.env.DISCORD_TOKEN),r=new i.Client({intents:["Guilds","GuildVoiceStates"]});r.once(i.Events.ClientReady,()=>{console.log("Bot is Ready!")});r.on(i.Events.InteractionCreate,e=>{if(e.isCommand()&&e.commandName=="setup"){if(e.guild?.channels.cache.some(n=>n.name==c&&n.type==i.ChannelType.GuildCategory))return;e.guild?.channels.create({name:c,type:i.ChannelType.GuildCategory}).then(n=>{a.forEach(o=>{e.guild?.channels.create({name:o.title,parent:n.id,type:i.ChannelType.GuildVoice,userLimit:o.userLimit})})}),e.reply("Setting up the bot")}});r.on(i.Events.VoiceStateUpdate,(e,t)=>{if(t.channel?.name){let n=a.findIndex(o=>o.title==t.channel?.name);if(n==-1)return;N(t,a[n].newTitle,a[n].userLimit)}if(e.channel?.name){if(a.findIndex(o=>o.newTitle==e.channel?.name)==-1&&e.channel?.members.size==0)return;e.channel?.delete()}});function N(e,t,n){e.channel?.guild.channels.create({name:t,type:i.ChannelType.GuildVoice,userLimit:n,parent:e.channel?.parent}).then(o=>{e.member?.voice.setChannel(o)})}var V=async()=>{await v.put(i.Routes.applicationCommands(process.env.DISCORD_CLIENT_ID),{body:u}),r.login(process.env.token)};V();
